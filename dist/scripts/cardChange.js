import getVisitInfo from"./api/getVisitInfo.js";import postCardCardiolist from"./postCardCardiolist.js";import postCardDentist from"./postCardDentist.js";import postCardTherapist from"./postCardTherapist.js";const cardChange=(e,a,s,t,l)=>{document.querySelector(".body-page").classList.add("blur"),document.querySelector(e).insertAdjacentHTML("beforeend",`<section class="cards-modal">\n<h2 class="cards-modal__title">Изменить карточку</h2>\n<form action="" method="post" class="cards-modal__form">\n  <div class="cards-modal__content">\n    <div class="cards-modal__section">\n      <label for="fullname" class="cards-modal__fullname_label"\n        >ФИО:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__fullname"\n        id="fullname"\n        value="${s}"\n      />\n      <label for="target" class="cards-modal__target_label"\n        >Цель визита:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__target"\n        id="target"\n        value="${t}"\n      />\n      <label for="desc" class="cards-modal__desc_label"\n        >Краткое описание визита:</label\n      >\n      <input required type="text" class="cards-modal__desc" id="desc" value="${l}"/>\n      <select\n        name="priority"\n        id="priority"\n        class="cards-modal__priority"\n      >\n        <option value="ordinary">Обычная</option>\n        <option value="priority">Приоритетная</option>\n        <option value="urgent">Неотложная</option>\n      </select>\n      <select name="doctors" id="priority" class="cards-modal__doctors">\n        <option value="cardiologist">Кардиолог</option>\n        <option value="dentist">Стоматолог</option>\n        <option value="therapist">Терапевт</option>\n      </select>\n    </div>\n    <div class="cards-modal__section">\n      <label for="pressure" class="cards-modal__pressure_label"\n        >Обычное давление:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__pressure"\n        id="pressure"\n      />\n      <label for="weight-index" class="cards-modal__weight-index_label"\n        >Индекс массы тела:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__weight-index"\n        id="weight-index"\n      />\n      <label for="diseases" class="cards-modal__diseases_label"\n        >Перенесенные заболевания сердечно-сосудистой системы:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__diseases"\n        id="diseases"\n      />\n      <label for="age" class="cards-modal__age_label">Возвраст:</label>\n      <input required type="text" class="cards-modal__age" id="age" />\n    </div>\n  </div>\n  <button class="cards-modal__btn cards-modal__btn_cancel">\n    Отменить\n  </button>\n  <button class="cards-modal__btn cards-modal__btn_submit" type="submit">\n    Изменить\n  </button>\n</form>\n</section>`),document.querySelector(".cards-modal__doctors").addEventListener("change",(function(){document.querySelectorAll(".cards-modal__section")[1].innerHTML="","cardiologist"===this.value?document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="pressure" class="cards-modal__pressure_label"\n        >Обычное давление:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__pressure"\n        id="pressure"\n      />\n      <label for="weight-index" class="cards-modal__weight-index_label"\n        >Индекс массы тела:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__weight-index"\n        id="weight-index"\n      />\n      <label for="diseases" class="cards-modal__diseases_label"\n        >Перенесенные заболевания сердечно-сосудистой системы:</label\n      >\n      <input\n        required\n        type="text"\n        class="cards-modal__diseases"\n        id="diseases"\n      />\n      <label for="age" class="cards-modal__age_label">Возвраст:</label>\n      <input required type="text" class="cards-modal__age" id="age" />'):"dentist"===this.value?document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="last-visit" class="cards-modal__last-visit_label">Дата последнего посещения:</label>\n        <input required type="text" class="cards-modal__last-visit" id="last-visit" />'):document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="age" class="cards-modal__age_label">Возвраст:</label>\n          <input required type="text" class="cards-modal__age" id="age" />')})),document.querySelector(".cards-modal__form").addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector(".cards-modal__form"),t=Array.from(s).map((e=>e.value)),l=localStorage.getItem("token");if("cardiologist"===t[4]){const[e,s,n,r,o,d,i,c,_]=t;console.log(postCardCardiolist(l,e,o,s,r,n,d,i,c,_,"PUT",a)),getVisitInfo(l),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}else if("dentist"===t[4]){const[e,s,n,r,o,d]=t;console.log(postCardDentist(l,e,o,s,r,n,d,"PUT",a)),getVisitInfo(l),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}else if("therapist"===t[4]){const[e,s,n,r,o,d]=t;console.log(postCardTherapist(l,e,o,s,r,n,d,"PUT",a)),getVisitInfo(l),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}getVisitInfo(l)})),document.querySelector(".cards-modal__btn_cancel").addEventListener("click",(()=>{document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}))};export default cardChange;