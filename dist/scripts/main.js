import loginModal from"./loginModal.js";import cardCreate from"./cardCreate.js";import getVisitInfo from"./api/getVisitInfo.js";import getGilteredInputValue from"./filter/inputFilter.js";import getFilteredPriority from"./filter/priorityFilter.js";(()=>{if(localStorage.getItem("token")){const e=localStorage.getItem("token");document.querySelector(".navbar__login").textContent=`Выйти из ${localStorage.email}`,getVisitInfo(e)}})();const filterBtn=document.querySelector(".filter__open-btn"),filterIcon=document.querySelector(".filter__open-icon"),filterForm=document.querySelector(".filter__form");filterBtn.addEventListener("click",(()=>{filterIcon.classList.toggle("open"),filterForm.classList.toggle("open")}));const loginBtn=document.querySelector(".navbar__login_link");loginBtn.addEventListener("click",(()=>{"Войти"!==document.querySelector(".navbar__login").textContent?(localStorage.removeItem("token"),localStorage.removeItem("email"),document.querySelector(".navbar__login").textContent="Войти",document.querySelector(".cards-box").innerHTML=""):(new loginModal).render(".main-page")}));const createVisitBtn=document.querySelector(".navbar__create-visit");createVisitBtn.addEventListener("click",(()=>{(new cardCreate).render(".main-page")}));const filterInput=document.querySelector(".filter__search"),filterSelect=document.querySelector(".filter__priority");filterInput.addEventListener("input",(()=>{document.querySelectorAll(".card").forEach((e=>{e.hidden=!1})),getFilteredPriority(filterSelect),getGilteredInputValue(filterInput)})),filterSelect.addEventListener("change",(()=>{document.querySelectorAll(".card").forEach((e=>{e.hidden=!1})),getFilteredPriority(filterSelect)}));