import cardChange from"../cardChange.js";class Visit{constructor(e,t,a,n,s,r){this.cardID=e,this.name=t,this.doctor=a,this.vistTarget=n,this.urgency=s,this.desc=r}changeBtn(){localStorage.getItem("token");const e=document.createElement("div");return e.classList.add("card__change-btn","card-btn"),e.innerHTML='<svg class="change-btn-svg" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="20px" height="20px" viewBox="0 0 528.899 528.899" style="enable-background:new 0 0 528.899 528.899;"\n    xml:space="preserve">\n   <path  d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981\n     c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611\n     C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069\n     L27.473,390.597L0.3,512.69z"/>',e.addEventListener("click",(e=>{cardChange(".main-page",this.cardID,this.name,this.vistTarget,this.desc)})),e}deleteBtn(){const e=localStorage.getItem("token"),t=document.createElement("div");return t.classList.add("card__delete-btn","card-btn"),t.addEventListener("click",(t=>{fetch(`https://ajax.test-danit.com/api/v2/cards/${this.cardID}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}).then((e=>{t.target.parentElement.remove()}))})),t}createCard(){const e=document.createElement("div");e.classList.add("card"),e.insertAdjacentElement("afterbegin",this.deleteBtn()),e.insertAdjacentElement("afterbegin",this.changeBtn()),e.insertAdjacentHTML("beforeend",`\n      <div class="card-atribute-wrraper">\n        <h4 class="card-title">${this.vistTarget}</h4>\n        <p class="card-atribute"><span>ФИО:</span> ${this.name}</p>\n        <p class="card-atribute"><span>Врач:</span> ${this.doctor}</p>\n        <p class="card-atribute card-atribute_desc"><span>Краткое описание визита:</span> ${this.desc}</p>\n        <p class="card-atribute card-atribute_priority"><span>Срочность:</span> ${this.urgency}</p> \n      </div>     \n      `);const t=document.createElement("p"),a=document.createElement("div"),n=document.createElement("div");return a.classList.add("show-more-wrraper"),t.classList.add("show-more-btn"),n.classList.add("show-more-args"),t.innerText="Показать больше",t.addEventListener("click",(e=>{e.target.classList.toggle("show-more-btn--active"),e.target.previousSibling.classList.toggle("show-more-args-active"),"Показать больше"==e.target.innerText?e.target.innerText="Показать меньше":e.target.innerText="Показать больше"})),a.insertAdjacentElement("beforeend",n),a.insertAdjacentElement("beforeend",t),e.insertAdjacentElement("beforeend",a),e}}export default Visit;