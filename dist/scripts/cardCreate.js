import postCardCardiolist from"./postCardCardiolist.js";import postCardDentist from"./postCardDentist.js";import postCardTherapist from"./postCardTherapist.js";import getVisitInfo from"./api/getVisitInfo.js";class cardCreate{constructor(e,s,a,t,l,r,n,d,o){this.fullname=e,this.target=s,this.desc=a,this.priority=t,this.pressure=l,this.weightIndex=r,this.diseases=n,this.age=d,this.lastVisist=o}render(e){document.querySelector(".body-page").classList.add("blur"),document.querySelector(e).insertAdjacentHTML("beforeend",'<section class="cards-modal">\n    <h2 class="cards-modal__title">Создать визит</h2>\n    <form action="" method="post" class="cards-modal__form">\n      <div class="cards-modal__content">\n        <div class="cards-modal__section">\n          <label for="fullname" class="cards-modal__fullname_label"\n            >ФИО:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__fullname"\n            id="fullname"\n          />\n          <label for="target" class="cards-modal__target_label"\n            >Цель визита:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__target"\n            id="target"\n          />\n          <label for="desc" class="cards-modal__desc_label"\n            >Краткое описание визита:</label\n          >\n          <input required type="text" class="cards-modal__desc" id="desc" />\n          <select\n            name="priority"\n            id="priority"\n            class="cards-modal__priority"\n          >\n            <option value="ordinary">Обычная</option>\n            <option value="priority">Приоритетная</option>\n            <option value="urgent">Неотложная</option>\n          </select>\n          <select name="doctors" id="priority" class="cards-modal__doctors">\n            <option value="cardiologist">Кардиолог</option>\n            <option value="dentist">Стоматолог</option>\n            <option value="therapist">Терапевт</option>\n          </select>\n        </div>\n        <div class="cards-modal__section">\n          <label for="pressure" class="cards-modal__pressure_label"\n            >Обычное давление:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__pressure"\n            id="pressure"\n          />\n          <label for="weight-index" class="cards-modal__weight-index_label"\n            >Индекс массы тела:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__weight-index"\n            id="weight-index"\n          />\n          <label for="diseases" class="cards-modal__diseases_label"\n            >Перенесенные заболевания сердечно-сосудистой системы:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__diseases"\n            id="diseases"\n          />\n          <label for="age" class="cards-modal__age_label">Возвраст:</label>\n          <input required type="text" class="cards-modal__age" id="age" />\n        </div>\n      </div>\n      <button class="cards-modal__btn cards-modal__btn_cancel">\n        Отменить\n      </button>\n      <button class="cards-modal__btn cards-modal__btn_submit" type="submit">\n        Создать\n      </button>\n    </form>\n  </section>'),document.querySelector(".cards-modal__doctors").addEventListener("change",(function(){document.querySelectorAll(".cards-modal__section")[1].innerHTML="","cardiologist"===this.value?document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="pressure" class="cards-modal__pressure_label"\n            >Обычное давление:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__pressure"\n            id="pressure"\n          />\n          <label for="weight-index" class="cards-modal__weight-index_label"\n            >Индекс массы тела:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__weight-index"\n            id="weight-index"\n          />\n          <label for="diseases" class="cards-modal__diseases_label"\n            >Перенесенные заболевания сердечно-сосудистой системы:</label\n          >\n          <input\n            required\n            type="text"\n            class="cards-modal__diseases"\n            id="diseases"\n          />\n          <label for="age" class="cards-modal__age_label">Возвраст:</label>\n          <input required type="text" class="cards-modal__age" id="age" />'):"dentist"===this.value?document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="last-visit" class="cards-modal__last-visit_label">Дата последнего посещения:</label>\n            <input required type="text" class="cards-modal__last-visit" id="last-visit" />'):document.querySelectorAll(".cards-modal__section")[1].insertAdjacentHTML("beforeend",'<label for="age" class="cards-modal__age_label">Возвраст:</label>\n              <input required type="text" class="cards-modal__age" id="age" />')})),document.querySelector(".cards-modal__form").addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector(".cards-modal__form"),a=Array.from(s).map((e=>e.value)),t=localStorage.getItem("token");if("cardiologist"===a[4]){const[e,s,l,r,n,d,o,i,c]=a;postCardCardiolist(t,e,n,s,r,l,d,o,i,c,"POST",""),getVisitInfo(t),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}else if("dentist"===a[4]){const[e,s,l,r,n,d]=a;postCardDentist(t,e,n,s,r,l,d,"POST",""),getVisitInfo(t),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}else if("therapist"===a[4]){const[e,s,l,r,n,d]=a;postCardTherapist(t,e,n,s,r,l,d,"POST",""),getVisitInfo(t),document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}})),document.querySelector(".cards-modal__btn_cancel").addEventListener("click",(()=>{document.querySelector(".body-page").classList.remove("blur"),document.querySelector(".cards-modal").remove()}))}}export default cardCreate;